# 13장 스코프

## 13.1 스코프란?

스코프는 식별자가 유효한 범위이다.

코드가 어디서 실행되며 주변에 어떤 코드가 있는지를 **렉시컬 환경**이라고 한다.

var는 같은 스코프 내에서 중복 선언이 되어 변수값이 재할당 될 수 있지만, let과 const는 스코프 내에서 중복 선언을 허용하지 않는다.

## 13.2 스코프의 종류

- 전역 스코프 : 어디서든 참조 할 수 있는 영역
- 지역 스코프 : 함수 몸체 내부 영역

## 13.3 스코프 체인

모든 지역 스코프의 최상위 스코프는 전역 스코프이다.

전역 스코프 안에 함수 내부의 지역 스코프가 있으며, 그 함수 내부의 또 다른 함수도 지역 스코프가 된다. 이처럼 스코프가 계층적으로 연결된 것을 스코프 체인이라고 한다.

변수를 참조할 때 스코프 체인을 통해 변수를 참조하는 해당 스코프에서 시작하여 상위 스코프 방향으로 이동하면서 변수를 검색한다.

자바스크립트 엔진은 계층적으로 연결되어있는 스코프 체인과 유사한 자료구조인 **렉시컬 환경**을 실제로 생성한다.

## 13.4 함수 레벨 스코프

지역 스코프는 코드 블록이 아닌 함수에 의해서 생성된다.

var 변수는 함수의 몸체 내부를 지역 스코프로 인정하는데, 이것을 **함수 레벨 스코프**라 한다.

## 13.5 렉시컬 스코프

1. 동적 스코프 : 함수를 어디서 호출했는지에 따라 함수의 상위 스코프를 결정한다.
2. 정적/렉시컬 스코프 : 함수를 어디서 정의했는지에 따라 함수의 상의 스코프를 결정한다.

자바스크립트는 렉시컬 스코프를 따르므로, 함수가 어디서 정의됐는지에 따라 상의 스코프를 결정하여 변수를 탐색한다.

호출된 곳이 어디인지는 관계없이 언제나 자신이 기억하고 있는 전역 스코프를 상위 스코프로 사용한다.

```javascript
var x = 1;

function foo() {
  //정의된 위치가 전역 변수를 탐색한다.
  var x = 10;
  bar(); //어디서 호출됐는지는 중요하지 않다.
}

function bar() {
  //정의된 위치가 전역 변수를 탐색한다.
  console.log(x);
}

// bar를 호출하고 있으며 bar는 전역변수를 탐색한다
foo(); // 1
bar(); // 1
```
